!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).webInject=e()}(this,function(){"use strict";function o(){return void 0===window}function c(t){(document.head||document.getElementsByTagName("head")[0]).appendChild(t)}function t(){this.finishedTask=[]}return t.prototype.create=function(){return new t},t.prototype.js=function(t,e){if(this.finishedTask.find(function(t){t.url}))return e(),this;function n(){this.finishedTask.push({url:t,type:"js",status:"loaded"}),e()}var s,i,r;return o()?window.document.querySelector('[src="'+t+'"]')?n():0==t.indexOf("http")||0==t.indexOf("/")?(s=t,i=n,(r=document.createElement("script")).setAttribute("type","text/javascript"),r.setAttribute("src",s),r.onload=r.onreadystatechange=function(){this.readyState&&"loaded"!=this.readyState&&"complete"!=this.readyState||setTimeout(function(){i()},100)},c(r)):function(t,e){var n=document.createElement("script");n.setAttribute("type","text/javascript"),n.appendChild(document.createTextNode(t)),this.appendToHead(n),this.asyncCallback(e)}(t,n):n(),this},t.prototype.css=function(t,e){if(this.finishedTask.find(function(t){t.url}))return e(),this;function n(){this.finishedTask.push({url:t,type:"css",status:"loaded"}),e()}var s,i,r;return o()?window.document.querySelector('[href="'+t+'"]')?n():0==t.indexOf("http")||0==t.indexOf("/")?(s=t,i=n,(r=document.createElement("link")).onload=r.onreadystatechange=function(){this.readyState&&"loaded"!=this.readyState&&"complete"!=this.readyState||i&&i()},-1==s.lastIndexOf(".css")&&(s+=".css"),r.setAttribute("rel","stylesheet"),r.setAttribute("href",s),c(r)):function(t,e){var n=document.createElement("style");n.setAttribute("rel","stylesheet"),n.setAttribute("type","text/css"),this.appendToHead(n);var s=n.getAttribute("media");null==s||/screen/.test(s.toLowerCase())||n.setAttribute("media","screen"),n.styleSheet?n.styleSheet.cssText+=t:document.getBoxObjectFor?n.innerHTML+=t:n.appendChild(document.createTextNode(t)),this.asyncCallback(e)}(t,n):n(),this},t.prototype.image=function(t,e){return o()&&(n=t,s=e,(i=document.createElement("img")).src=n,i.complete?s():(i.onload=function(){s()},i.onerror=function(t){s()})),this;var n,s,i},t.prototype.getTagMap=function(t,e){var n={js:[],css:[]};return this.finishedTask.forEach(function(t){"js"===t.type?n.js.push('<script type="text/javascript" src="'+t.url+'"><\/script>'):"css"===t.type&&n.css.push('<link rel="stylesheet" href="'+t.url+'"></link>')}),n},new t});
